@using FP.Models

@{
    ViewBag.Title = "Floorplans";
}

@section head {}
@{
    LMFloorplanEntities entities = new LMFloorplanEntities();
}
@model IEnumerable<FP.Models.Floorplan>

<div class="table-container hidden">
    <div class="table-container-inner">

        <div class="table-responsive">

            <table id="pageTable" class="display responsive" style="width:100%">
                <thead>
                    <tr>
                        @*<th>ID</th>*@
                        <th><i class="far fa-file-contract"></i> Contract</th>
                        <th><i class="far fa-file-code"></i> Code</th>
                        <th><i class="far fa-file-alt"></i> Name</th>
                        <th><i class="far fa-sticky-note"></i> Description</th>
                        <th><a href="/Floorplans/Add" class="btn btn-primary btn-sm"><i class="fas fa-plus"></i> New</a></th>
                    </tr>
                </thead>
                <tbody>

                    @foreach (var item in Model)
                    {
                        <tr>
                            @*<td>
                                @item.FloorplanId
                            </td>*@
                            <td>
                                @entities.Contracts.FirstOrDefault(x => x.ContractId == item.ContractId).Name
                            </td>
                            <td>
                                @item.Code
                            </td>
                            <td>
                                @item.Name
                            </td>
                            <td>
                                @item.Description
                            </td>
                            <td>
                                <a id="edit-btn-@item.FloorplanId" href="/Floorplans/Edit/@item.FloorplanId" class="btn btn-primary btn-sm"><i class="fas fa-edit"></i> Edit</a>
                            </td>
                        </tr>
                    }

                </tbody>
            </table>
        </div>

        </div>


    </div>

@section scripts {

    <script type="text/javascript">
        $(document).ready(function () {
            var table = $('#pageTable').DataTable();
            $("#pageTable_filter").load("/content/html/dt-search.html");
            $(document.body).on('keyup', '#dt-search', function () {
                table.search(this.value).draw();
            });

            $(".table-container").removeClass("hidden");
        });

        var fbCloseRefresh = function () {
            $.fancybox.close();
            location.reload();
        };

    </script>
}